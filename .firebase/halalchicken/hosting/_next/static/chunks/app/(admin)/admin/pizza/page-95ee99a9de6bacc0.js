(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[507],{96055:function(e,a,s){Promise.resolve().then(s.bind(s,22824))},22824:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return G}});var l=s(9268),r=s(42974),t=s(3586),i=s(95560),n=s(9280),c=s(62339),d=s(4492),o=s(55483),m=s(92391),x=s(67830),h=s(74238),u=s(13543),g=s(99345),j=s(96785),p=s(98364),N=s(72950),f=s(19700),y=s(8794),v=s(25878),b=s(73746),I=s(26602),z=s(47777),w=s(86006);let C=["image/jpeg","image/jpg","image/png","image/webp"],S=h.t8.filter(e=>"Pizza"!=e),k={name:"",description:"",price:1,availableInMeal:!1,mealPrice:0,image:"",category:S[0],mainCategory:(0,h.BV)(S[0]),sizes:[{name:"Small",shortName:"SM",inch:9},{name:"Medium",shortName:"MD",inch:12},{name:"Large",shortName:"LG",inch:14},{name:"Family",shortName:"FM",inch:16},{name:"New York Style",shortName:"NY",inch:18}].map(e=>({shortName:e.shortName,price:0}))},M=m.Ry({name:m.Z_().nonempty({message:"Name is required."}),description:m.Z_().nonempty({message:"Description is required."}),price:m.Rx().min(1,{message:"Must be greater than 1."}),image:m.Z_({required_error:"Image is required."}),category:m.Km(h.t8,{required_error:"Please select a category."}),mainCategory:m.Km(h.YW,{required_error:"Please select a category."}),sizes:m.IX(m.Ry({shortName:m.Z_({required_error:"shortName Required"}),price:m.Rx().min(0,"Price must be at least 0.")}))}),P=m.VK("availableInMeal",[m.Ry({availableInMeal:m.i0(!0),mealPrice:m.Rx().min(1,{message:"Meal Price must be at least 1."})}).merge(M),m.Ry({availableInMeal:m.i0(!1),mealPrice:m.Rx().min(0,{message:"Meal Price must be at least 0."})}).merge(M)]);function _(e){let{children:a,item:s}=e,[t,i]=(0,w.useState)(null),n=(e,a)=>{var s;let l;let r=null===(s=e.target.files)||void 0===s?void 0:s[0];r?r.size>5e5?l="Max file size is 5MB.":C.includes(r.type)||(l=".jpg, .jpeg, .png and .webp files are accepted."):l="Image is required",l?m.setError("image",{type:"value",message:l}):(i(r),m.clearErrors("image")),a(e)},m=(0,f.cI)({resolver:(0,x.F)(P),defaultValues:s?{...s,image:s.image.downloadURL}:k});return(0,l.jsxs)(u.Vq,{onOpenChange:e=>{if(e){let{image:e,...a}=null!=s?s:k;m.reset({...a,image:""})}},children:[(0,l.jsx)(u.hg,{asChild:!0,children:a}),(0,l.jsxs)(u.cZ,{className:"sm:max-w-[800px] sm:max-h-[550px] flex flex-col p-0",children:[(0,l.jsxs)(u.fK,{className:"pt-6 px-6",children:[(0,l.jsx)(u.$N,{children:"New Item"}),(0,l.jsx)(u.Be,{children:"Create a new item by filling out the form below."})]}),(0,l.jsx)(v.ScrollArea,{className:"h-[450px] px-6 pb-6",children:(0,l.jsx)(y.l0,{...m,children:(0,l.jsxs)("form",{onSubmit:m.handleSubmit(function(e){if(e.sizes=e.sizes.filter(e=>e.price>0),0==e.sizes.length){(0,o.Am)({title:"Item Sizes",description:"At least one size must have a price greater than 0",variant:"destructive"});return}if(e.price=function(e){let a=Number.MAX_SAFE_INTEGER;for(let s of e)a=Math.min(a,s.price);return a}(e.sizes),null==t&&null==s){(0,o.Am)({title:"Item Image",description:"Image is required",variant:"destructive"});return}if(null==s){let a={...e,image:t};d.k.instance.addFoodItem(a).then(()=>{(0,o.Am)({title:"Item Added",description:"Item has been added successfully"}),m.reset(k)})}else{let a;a=null!=t?{...s,...e,image:t}:{...s,...e,image:s.image},d.k.instance.updateFoodItem(s.id,a,s).then(()=>{(0,o.Am)({title:"Item Updated",description:"Item has been updated successfully"}),m.reset(k)})}}),className:"grid grid-cols-2 gap-2",children:[(0,l.jsxs)("div",{className:"col-span-full flex flex-row gap-2",children:[(0,l.jsx)(y.Wi,{control:m.control,name:"name",render:e=>{let{field:a}=e;return(0,l.jsxs)(y.xJ,{className:"flex-1",children:[(0,l.jsx)(y.lX,{children:"Name"}),(0,l.jsx)(y.NI,{children:(0,l.jsx)(g.I,{placeholder:"Chicken Biryani",...a})}),(0,l.jsx)(y.zG,{})]})}}),(0,l.jsx)(y.Wi,{control:m.control,name:"category",render:e=>{let{field:a}=e;return(0,l.jsxs)(y.xJ,{className:"flex flex-col flex-1 space-y-0",children:[(0,l.jsx)(y.lX,{className:"my-2",children:"Language"}),(0,l.jsxs)(b.J2,{children:[(0,l.jsx)(b.xo,{asChild:!0,children:(0,l.jsx)(y.NI,{children:(0,l.jsxs)(c.z,{variant:"outline",role:"combobox",className:(0,I.cn)("w-full justify-between",!a.value&&"text-muted-foreground"),children:[a.value||"Select Category",(0,l.jsx)(j.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),(0,l.jsx)(b.yk,{className:"w-full p-0",children:(0,l.jsxs)(z.mY,{children:[(0,l.jsx)(z.sZ,{placeholder:"Search Category"}),(0,l.jsx)(z.rb,{children:"No category found."}),(0,l.jsx)(z.fu,{children:h.t8.map(e=>(0,l.jsxs)(z.di,{value:e,onSelect:e=>{let a=h.t8.find(a=>a.toLowerCase()===e);m.setValue("category",a),m.setValue("mainCategory",(0,h.BV)(a))},children:[(0,l.jsx)(p.Z,{className:(0,I.cn)("mr-2 h-4 w-4",e===a.value?"opacity-100":"opacity-0")}),e]},e))})]})})]}),(0,l.jsx)(y.zG,{})]})}})]}),(0,l.jsx)("div",{className:"col-span-2",children:(0,l.jsx)(y.Wi,{control:m.control,name:"description",render:e=>{let{field:a}=e;return(0,l.jsxs)(y.xJ,{children:[(0,l.jsx)(y.lX,{children:"Description"}),(0,l.jsx)(y.NI,{children:(0,l.jsx)(g.I,{placeholder:"Aromatic rice dish with chicken",...a})}),(0,l.jsx)(y.zG,{})]})}})}),(0,l.jsx)(y.Wi,{control:m.control,name:"mealPrice",render:e=>{let{field:a}=e;return(0,l.jsxs)(y.xJ,{children:[(0,l.jsx)(y.lX,{children:"Meal Price"}),(0,l.jsxs)("div",{className:"flex flex-row justify-start",children:[(0,l.jsx)(y.Wi,{control:m.control,name:"availableInMeal",render:e=>{let{field:a}=e;return(0,l.jsx)(y.xJ,{className:"flex rounded-md rounded-e-none  border py-2  px-3 justify-center items-center",children:(0,l.jsx)(y.NI,{children:(0,l.jsx)(r.X,{checked:a.value,onCheckedChange:a.onChange})})})}}),(0,l.jsx)(y.NI,{className:"flex-1",children:(0,l.jsx)(g.I,{disabled:!m.getValues().availableInMeal,className:"rounded-s-none",type:"number",placeholder:"15.99",...a,onChange:e=>{let a=(0,I.t)(e.target.value);m.setValue("mealPrice",a)}})})]}),(0,l.jsx)(y.zG,{})]})}}),(0,l.jsx)(y.Wi,{control:m.control,name:"image",render:e=>{let{field:a}=e;return(0,l.jsxs)(y.xJ,{children:[(0,l.jsx)(y.lX,{children:"Image"}),(0,l.jsx)(y.NI,{children:(0,l.jsx)(g.I,{type:"file",...a,onChange:e=>n(e,a.onChange)})}),(0,l.jsx)(y.zG,{})]})}}),(0,l.jsx)(y.Wi,{control:m.control,name:"sizes",render:e=>{let{field:a}=e;return(0,l.jsx)(l.Fragment,{children:a.value.map((e,s)=>(0,l.jsxs)(y.xJ,{children:[(0,l.jsxs)(y.lX,{children:["Price for ",e.shortName]}),(0,l.jsx)(y.NI,{children:(0,l.jsx)(g.I,{type:"number",value:e.price,onChange:s=>{let l=(0,I.t)(s.target.value);isNaN(l)&&(l=0);let r=a.value.findIndex(a=>a.shortName===e.shortName),t=[...a.value];t[r].price=l,m.setValue("sizes",t)}})}),(0,l.jsx)(y.zG,{})]},e.shortName))})}}),(0,l.jsx)(u.cN,{className:"col-span-2 flex justify-end",children:(0,l.jsxs)(c.z,{size:"lg",type:"submit",children:[(0,l.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),s?"Update":"Save Changes"]})})]})})})]})]})}function A(e){let{row:a}=e;return(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(_,{item:a.original,children:(0,l.jsxs)(c.z,{variant:"ghost",className:"flex h-8 w-8 p-0 bg-muted",children:[(0,l.jsx)(i.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Edit"})]})}),(0,l.jsx)(F,{item:a.original})]})}let F=e=>{let{item:a}=e,{toast:s}=(0,o.pm)(),[r,t]=(0,w.useState)(!1);return(0,l.jsx)(c.z,{variant:"ghost",onClick:async()=>{t(!0);try{await d.k.instance.delete(a),s({title:"Food Item Deleted",description:"Food Item has been deleted."})}catch(e){s({title:"Error",description:"Failed to delete food item.",variant:"destructive"})}finally{t(!1)}},className:"flex h-8 w-8 p-0 bg-muted",disabled:r,children:r?(0,l.jsx)(LoadingCircle,{size:4}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Delete"})]})})};var R=s(87819),V=s(52029);let Z=[{id:"select",header:e=>{let{table:a}=e;return(0,l.jsx)(r.X,{checked:a.getIsAllPageRowsSelected(),onCheckedChange:e=>a.toggleAllPageRowsSelected(!!e),"aria-label":"Select all",className:"translate-y-[2px]"})},cell:e=>{let{row:a}=e;return(0,l.jsx)(r.X,{checked:a.getIsSelected(),onCheckedChange:e=>a.toggleSelected(!!e),"aria-label":"Select row",className:"translate-y-[2px]"})},enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:e=>{let{column:a}=e;return(0,l.jsx)(t.p,{column:a,title:"Name"})},cell:e=>{let{row:a}=e;return(0,l.jsxs)("div",{className:"flex gap-2 w-[120px]",children:[(0,l.jsxs)(R.Avatar,{children:[(0,l.jsx)(R.AvatarImage,{src:a.original.image.downloadURL,alt:"Food Item Image"}),(0,l.jsx)(R.AvatarFallback,{children:"IT"})]}),(0,l.jsx)("span",{children:a.getValue("name")})]})},enableSorting:!0,enableHiding:!1},{accessorKey:"description",header:e=>{let{column:a}=e;return(0,l.jsx)(t.p,{column:a,title:"Description"})},cell:e=>{let{row:a}=e;return(0,l.jsx)("div",{className:"w-[150px]",children:a.getValue("description")})},enableSorting:!1,enableHiding:!1},{accessorKey:"category",header:e=>{let{column:a}=e;return(0,l.jsx)(t.p,{column:a,title:"Category"})},cell:e=>{let{row:a}=e;return(0,l.jsx)("div",{className:"",children:a.getValue("category")})},filterFn:(e,a,s)=>s.includes(e.original.category),enableSorting:!0,enableHiding:!1},{accessorKey:"sizes",header:e=>{let{column:a}=e;return(0,l.jsx)(t.p,{column:a,title:"Sizes"})},cell:e=>{let{row:a}=e,s=a.original.sizes;return(0,l.jsx)("div",{className:"flex space-x-2",children:s.map(e=>(0,l.jsxs)(V.C,{variant:"outline",children:[e.shortName," $ ",e.price]}))})}},{id:"actions",cell:e=>{let{row:a}=e;return(0,l.jsx)(A,{row:a})}}];var q=s(74880),X=s(88589),E=s(6630);function G(){let e=d.k.instance.store(e=>e.pizzas);return(0,l.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Pizza"}),(0,l.jsx)("div",{className:"flex items-center space-x-2",children:(0,l.jsx)(_,{children:(0,l.jsxs)(c.z,{size:"sm",children:[(0,l.jsx)(X.Z,{className:"mr-2 h-4 w-4"}),"New Pizza"]})})})]}),(0,l.jsx)(q.w,{data:e,columns:Z,toolbar:e=>(0,l.jsx)(E.C,{table:e})})]})}}},function(e){e.O(0,[662,913,547,368,8,868,586,982,997,340,389,253,488,744],function(){return e(e.s=96055)}),_N_E=e.O()}]);